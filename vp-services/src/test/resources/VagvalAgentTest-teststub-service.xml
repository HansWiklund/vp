<?xml version="1.0" encoding="utf-8"?>

<mule xmlns="http://www.mulesource.org/schema/mule/core/2.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:spring="http://www.springframework.org/schema/beans"
	xmlns:jms="http://www.mulesource.org/schema/mule/jms/2.2" xmlns:cxf="http://www.mulesource.org/schema/mule/cxf/2.2"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
		http://www.mulesource.org/schema/mule/core/2.2  http://www.mulesource.org/schema/mule/core/2.2/mule.xsd
		http://www.mulesource.org/schema/mule/jms/2.2   http://www.mulesource.org/schema/mule/jms/2.2/mule-jms.xsd
		http://www.mulesource.org/schema/mule/cxf/2.2  http://www.mulesource.org/schema/mule/cxf/2.2/mule-cxf.xsd
	">

	<custom-transformer name="rivTransformer"
		class="se.skl.tp.vp.vagvalrouter.RivTransformer">
		<spring:property name="vagvalAgent" ref="vagvalAgent" />
		<spring:property name="senderIdPropertyName" value="${VAGVALROUTER_SENDERID}" />
	</custom-transformer>

	<spring:bean name="vagvalInputs" class="se.skl.tp.vp.vagvalagent.SokVagvalsInfoMockInput" />

	<spring:bean name="vagvalAgent" class="se.skl.tp.vp.vagvalagent.VagvalAgent">
		<spring:property name="endpointAddress" value="http://localhost:8080/tp-vagval-admin-services/SokVagvalsInfo" />
		<spring:property name="addressDelimiter" value="#" />
	</spring:bean>


	<!-- TODO: Add teststub-service specific definitions here -->

	<model name="VagvalRouter-teststub-model">

		<service name="SokVagvalsInfoStubService">
			<inbound>
				<cxf:inbound-endpoint
					address="http://localhost:8080/tp-vagval-admin-services/SokVagvalsInfo"
					wsdlLocation="classpath:/schemas/interactions/vagvalsInfo/wrapped-vagvalsinfo-sokvagvalsinfo-1.0.wsdl" />
			</inbound>
			<component>
				<singleton-object class="se.skl.tp.vp.vagvalagent.SokVagvalsInfoMock">
					<property key="vagvalInputs" value-ref="vagvalInputs" />
				</singleton-object>
			</component>
		</service>

	</model>

</mule>
