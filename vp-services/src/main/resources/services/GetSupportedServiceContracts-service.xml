<?xml version="1.0" encoding="utf-8"?>

<mule 
	xmlns="http://www.mulesource.org/schema/mule/core/2.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:jdbc="http://www.mulesource.org/schema/mule/vm/2.2"
	xmlns:cxf="http://www.mulesource.org/schema/mule/cxf/2.2"
	xmlns:jms="http://www.mulesource.org/schema/mule/jms/2.2"
	xmlns:spring="http://www.springframework.org/schema/beans"
	xmlns:smooks="http://www.muleforge.org/smooks/schema/mule-module-smooks/1.2"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
		http://www.mulesource.org/schema/mule/core/2.2  http://www.mulesource.org/schema/mule/core/2.2/mule.xsd
		http://www.mulesource.org/schema/mule/cxf/2.2   http://www.mulesource.org/schema/mule/cxf/2.2/mule-cxf.xsd
		http://www.mulesource.org/schema/mule/jms/2.2   http://www.mulesource.org/schema/mule/jms/2.2/mule-jms.xsd
		http://www.muleforge.org/smooks/schema/mule-module-smooks/1.2 http://dist.muleforge.org/smooks/schema/mule-module-smooks/1.2/mule-module-smooks.xsd
	">
	
	<spring:beans>
		<spring:bean id="tpadmin-dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
			<spring:property name="url" value="jdbc:mysql://${GETSUPPORTEDSERVICECONTRACTS_DB_HOST}:${GETSUPPORTEDSERVICECONTRACTS_DB_PORT}/${GETSUPPORTEDSERVICECONTRACTS_DB_NAME}" />
			<spring:property name="username" value="${GETSUPPORTEDSERVICECONTRACTS_DB_USER}"/>
			<spring:property name="password" value="${GETSUPPORTEDSERVICECONTRACTS_DB_PASSWORD}"/>
		</spring:bean>
	</spring:beans>

	<model name="GetSupportedServiceContracts-model">
	
		<service name="GetSupportedServiceContracts-service-rivtabp21">
            <inbound>
                <cxf:inbound-endpoint 
                	address="https://${tp.host}:${tp.port}/${tp.baseUri}/GetSupportedServiceContracts/1/rivtabp21"
                    wsdlLocation="classpath:/schemas/interactions/GetSupportedServiceContractsInteraction/GetSupportedServiceContractsInteraction_1.0_RIVTABP21.wsdl"
                    serviceName="GetSupportedServiceContractsResponderService"
                    namespace="urn:riv:itintegration:registry:GetSupportedServiceContracts:1:rivtabp21"                 
                    proxy="false"
                    synchronous="true"
                    applyTransformersToProtocol="false"
                />
 
 				<!-- Removed createSoapFault... transformer. Turn this on later... -->
 
            </inbound>
            <component>
            	<singleton-object class="se.skl.tp.vp.getsupportedservicecontracts.GetSupportedServiceContractsImpl">
            		<property key="dataSource" value-ref="tpadmin-dataSource"/>
            	</singleton-object>
            </component>
		</service>
		
	</model>
</mule>
